(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{70908:function(e,t,a){Promise.resolve().then(a.bind(a,5293))},5293:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var r=a(57437),n=a(2265),s=a(39343),i=a(31014),l=a(59772),o=a(4716),d=a(54461),c=a(90620),u=a(89733),m=a(93363),f=a(77209),p=a(49354);let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("textarea",{className:(0,p.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});g.displayName="Textarea";var x=a(48185),h=a(21413),v=a(69081),y=a(24241),j=a(86763),b=a(61016);let N=l.z.object({date:l.z.date({required_error:"A date is required."}),startTime:l.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Invalid time format (HH:mm)"}),endTime:l.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Invalid time format (HH:mm)"}),breakDurationMinutes:l.z.coerce.number().nonnegative().int().default(0),trainingDurationMinutes:l.z.coerce.number().nonnegative().int().optional().default(0),documentsCompleted:l.z.coerce.number().nonnegative().int().default(0),videoSessionsCompleted:l.z.coerce.number().nonnegative().int().default(0),notes:l.z.string().optional(),targetId:l.z.string().optional()}).refine(e=>{if(!(0,o.J)(e.date))return!1;let t=(0,d.Qc)("".concat((0,c.WU)(e.date,"yyyy-MM-dd")," ").concat(e.startTime),"yyyy-MM-dd HH:mm",new Date),a=(0,d.Qc)("".concat((0,c.WU)(e.date,"yyyy-MM-dd")," ").concat(e.endTime),"yyyy-MM-dd HH:mm",new Date);return(0,o.J)(t)&&(0,o.J)(a)},{message:"Start or end time is invalid or date is missing.",path:["endTime"]});var w=e=>{let{onWorkLogSaved:t,existingLog:a}=e,{toast:l}=(0,j.pm)(),[w,D]=(0,n.useState)(!1),[C,T]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1),[I,P]=(0,n.useState)(void 0),[M,U]=(0,n.useState)(null);(0,n.useEffect)(()=>{k(!0);{let e=(0,b.Io)();P(null==e?void 0:e.id),U((0,b.Ok)())}},[]);let z=a&&a.date===(0,p._3)(new Date),A=(0,s.cI)({resolver:(0,i.F)(N),defaultValues:{date:void 0,startTime:"",endTime:"",breakDurationMinutes:0,trainingDurationMinutes:0,documentsCompleted:0,videoSessionsCompleted:0,notes:"",targetId:void 0}});(0,n.useEffect)(()=>{if(S&&M){if(a&&z){let r=(0,d.Qc)(a.date,"yyyy-MM-dd",new Date);if((0,o.J)(r)){var e,t;A.reset({date:r,startTime:a.startTime,endTime:a.endTime,breakDurationMinutes:a.breakDurationMinutes,trainingDurationMinutes:a.trainingDurationMinutes||0,documentsCompleted:a.documentsCompleted,videoSessionsCompleted:a.videoSessionsCompleted,notes:null!==(e=a.notes)&&void 0!==e?e:"",targetId:null!==(t=a.targetId)&&void 0!==t?t:I});let n=(a.breakDurationMinutes||0)+(a.trainingDurationMinutes||0);T((0,p.fH)(a.date,a.startTime,a.endTime,n))}}else W(M)}},[a,S,M,I,A]),(0,n.useEffect)(()=>{if(S){A.getValues("date")||A.setValue("date",new Date,{shouldDirty:!1,shouldValidate:!1});let e=A.getValues();if((0,o.J)(e.date)&&e.startTime&&e.endTime){let t=(e.breakDurationMinutes||0)+(e.trainingDurationMinutes||0);T((0,p.fH)(e.date,e.startTime,e.endTime,t))}}},[S]);let E=A.watch("startTime"),H=A.watch("endTime"),_=A.watch("breakDurationMinutes"),F=A.watch("trainingDurationMinutes"),R=A.watch("date");(0,n.useEffect)(()=>{if((0,o.J)(R)){let e=(0,c.WU)(R,"yyyy-MM-dd"),t=/^([01]\d|2[0-3]):([0-5]\d)$/;t.test(E)&&t.test(H)&&null!=_&&e?T((0,p.fH)(e,E,H,(_||0)+(F||0))):T(null)}else T(null)},[E,H,_,F,R]);let W=(0,n.useCallback)(e=>{var t,a,r,n;let s=new Date;A.reset({date:s,startTime:e.defaultStartTime||"14:00",endTime:e.defaultEndTime||"22:30",breakDurationMinutes:null!==(t=e.defaultBreakMinutes)&&void 0!==t?t:0,trainingDurationMinutes:null!==(a=e.defaultTrainingMinutes)&&void 0!==a?a:0,documentsCompleted:0,videoSessionsCompleted:0,notes:"",targetId:I});let i=(null!==(r=e.defaultBreakMinutes)&&void 0!==r?r:0)+(null!==(n=e.defaultTrainingMinutes)&&void 0!==n?n:0);T((0,p.fH)((0,p._3)(s),e.defaultStartTime||"14:00",e.defaultEndTime||"22:30",i))},[A,I]);return S&&M?(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsx)(x.ll,{children:z?"Update Today's Work Log":"Add/Update Work Log"})}),(0,r.jsx)(x.aY,{children:(0,r.jsx)(m.l0,{...A,children:(0,r.jsxs)("form",{onSubmit:A.handleSubmit(e=>{var r,n;if(D(!0),!(0,o.J)(e.date)){l({variant:"destructive",title:"Invalid Date",description:"Please select a valid date."}),D(!1);return}let s=(0,c.WU)(e.date,"yyyy-MM-dd"),i=(e.breakDurationMinutes||0)+(e.trainingDurationMinutes||0),u=(0,p.fH)(s,e.startTime,e.endTime,i);if(null===u||isNaN(u)||u<0){l({variant:"destructive",title:"Invalid Times",description:"Calculated hours worked is invalid. Check start/end times and break/training."}),D(!1);return}let m=!!(null==a?void 0:a.id)&&a.date===s,f=null!==(r=e.targetId)&&void 0!==r?r:I;if(!f&&!m&&!I){l({variant:"destructive",title:"No Active Target",description:"Cannot save new log. No active UPH target found. Please set one."}),D(!1);return}let g={...m&&{id:a.id},date:s,startTime:e.startTime,endTime:e.endTime,breakDurationMinutes:e.breakDurationMinutes,trainingDurationMinutes:e.trainingDurationMinutes||0,hoursWorked:u,documentsCompleted:e.documentsCompleted,videoSessionsCompleted:e.videoSessionsCompleted,targetId:f,notes:e.notes||""};try{let a=t(g);if(l({title:"Work Log Saved",description:"Entry for ".concat(s," has been ").concat(m?"updated":"added/updated",".")}),a.date===(0,p._3)(new Date)){let t=(a.breakDurationMinutes||0)+(a.trainingDurationMinutes||0),r=(0,p.fH)(a.date,a.startTime,a.endTime,t);T(r),A.reset({...e,date:(0,d.Qc)(a.date,"yyyy-MM-dd",new Date),startTime:a.startTime,endTime:a.endTime,breakDurationMinutes:a.breakDurationMinutes,trainingDurationMinutes:a.trainingDurationMinutes||0,documentsCompleted:a.documentsCompleted,videoSessionsCompleted:a.videoSessionsCompleted,notes:null!==(n=a.notes)&&void 0!==n?n:"",targetId:a.targetId})}else M&&W(M)}catch(e){console.error("Failed to save work log:",e),l({variant:"destructive",title:"Save Failed",description:e instanceof Error?e.message:"Could not save the work log."})}finally{D(!1)}}),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsx)(m.Wi,{control:A.control,name:"date",render:e=>{let{field:t}=e;return(0,r.jsxs)(m.xJ,{className:"flex flex-col",children:[(0,r.jsx)(m.lX,{children:"Date"}),(0,r.jsxs)(h.J2,{children:[(0,r.jsx)(h.xo,{asChild:!0,children:(0,r.jsx)(m.NI,{children:(0,r.jsxs)(u.z,{variant:"outline",className:(0,p.cn)("w-full justify-start text-left font-normal",!t.value&&"text-muted-foreground"),children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),t.value&&(0,o.J)(t.value)?(0,c.WU)(t.value,"PPP"):(0,r.jsx)("span",{children:"Pick a date"})]})})}),(0,r.jsx)(h.yk,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(v.f,{mode:"single",selected:t.value,onSelect:e=>e&&t.onChange(e),disabled:e=>e>new Date||e<new Date("2023-01-01"),initialFocus:!0})})]}),(0,r.jsx)(m.zG,{})]})}}),(0,r.jsxs)("div",{className:"flex flex-col justify-end pb-1",children:[(0,r.jsx)(m.lX,{children:"Calculated Hours"}),(0,r.jsx)("div",{className:"h-10 px-3 py-2 text-sm font-medium text-muted-foreground border border-input rounded-md bg-muted",children:null===C||isNaN(C)?"Enter times & break/training":"".concat(C.toFixed(2)," hrs")})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsx)(m.Wi,{control:A.control,name:"startTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Start Time (HH:mm)"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"time",...t})})," ",(0,r.jsx)(m.zG,{})," "]})}}),(0,r.jsx)(m.Wi,{control:A.control,name:"endTime",render:e=>{let{field:t}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"End Time (HH:mm)"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"time",...t})})," ",(0,r.jsx)(m.zG,{})," "]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsx)(m.Wi,{control:A.control,name:"breakDurationMinutes",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Break (Minutes)"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"e.g., 0",...a,value:null!==(t=a.value)&&void 0!==t?t:0,onChange:e=>a.onChange(parseInt(e.target.value,10)||0),min:"0",step:"1"})})," ",(0,r.jsx)(m.zG,{})," "]})}}),(0,r.jsx)(m.Wi,{control:A.control,name:"trainingDurationMinutes",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Training (Minutes)"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"e.g., 0",...a,value:null!==(t=a.value)&&void 0!==t?t:0,onChange:e=>a.onChange(parseInt(e.target.value,10)||0),min:"0",step:"1"})})," ",(0,r.jsx)(m.zG,{})," "]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[(0,r.jsx)(m.Wi,{control:A.control,name:"documentsCompleted",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Documents Completed"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"0",...a,value:null!==(t=a.value)&&void 0!==t?t:0,onChange:e=>a.onChange(parseInt(e.target.value,10)||0),min:"0"})})," ",(0,r.jsx)(m.zG,{})," "]})}}),(0,r.jsx)(m.Wi,{control:A.control,name:"videoSessionsCompleted",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Video Sessions Completed"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"0",...a,value:null!==(t=a.value)&&void 0!==t?t:0,onChange:e=>a.onChange(parseInt(e.target.value,10)||0),min:"0"})})," ",(0,r.jsx)(m.zG,{})," "]})}})]}),(0,r.jsx)(m.Wi,{control:A.control,name:"notes",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[" ",(0,r.jsx)(m.lX,{children:"Notes (Optional)"})," ",(0,r.jsx)(m.NI,{children:(0,r.jsx)(g,{placeholder:"Any relevant notes...",...a,value:null!==(t=a.value)&&void 0!==t?t:""})})," ",(0,r.jsx)(m.zG,{})," "]})}}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(u.z,{type:"submit",disabled:w,children:w?"Saving...":z?"Update Log":"Save Log"}),(!z||(0,o.J)(R)&&(0,p._3)(R)!==(0,p._3)(new Date)||!(0,o.J)(R))&&(0,r.jsx)(u.z,{type:"button",variant:"outline",onClick:()=>W(M),className:"ml-2",disabled:w,children:"Reset to Today's Defaults"})]})]})})})]}):(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsx)(x.ll,{children:"Loading Form..."})}),(0,r.jsx)(x.aY,{className:"space-y-6",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading settings..."})})]})},D=a(54662),C=a(47304),T=a(56900),S=a(92940),k=a(71935),I=a(75733),P=a(47019),M=a(6884),U=a(6649),z=a(10883),A=a(69324),E=a(22468);let H=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(A.fC,{ref:t,className:(0,p.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...n,children:(0,r.jsx)(A.z$,{className:(0,p.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(E.Z,{className:"h-4 w-4"})})})});H.displayName=A.fC.displayName;let _=l.z.object({name:l.z.string().min(1,{message:"Target name is required."}),targetUPH:l.z.coerce.number().positive({message:"Target UPH must be positive."}),docsPerUnit:l.z.coerce.number().positive({message:"Docs per unit must be a positive number."}),videosPerUnit:l.z.coerce.number().positive({message:"Videos per unit must be a positive number."}),isDisplayed:l.z.boolean().optional()});var F=e=>{let{targets:t=[],addUPHTargetAction:a,updateUPHTargetAction:l,deleteUPHTargetAction:o,setActiveUPHTargetAction:d,duplicateUPHTargetAction:c}=e,{toast:g}=(0,j.pm)(),[h,v]=(0,n.useState)(!1),[y,b]=(0,n.useState)(null),[N,w]=(0,n.useState)(!1),[A,E]=(0,n.useState)(t),[F,R]=(0,n.useState)(null),[W,J]=(0,n.useState)("asc");(0,n.useEffect)(()=>{E(t)},[t]);let L=(0,n.useMemo)(()=>F?[...A].sort((e,t)=>{var a,r;let n="isDisplayed"===F?null===(a=e.isDisplayed)||void 0===a||a:e[F],s="isDisplayed"===F?null===(r=t.isDisplayed)||void 0===r||r:t[F],i=0;return i="string"==typeof n&&"string"==typeof s?n.localeCompare(s):"number"==typeof n&&"number"==typeof s?n-s:"boolean"==typeof n&&"boolean"==typeof s?n===s?0:n?-1:1:String(n).localeCompare(String(s)),"asc"===W?i:-i}):[...A].sort((e,t)=>e.name.localeCompare(t.name)),[A,F,W]),O=(0,s.cI)({resolver:(0,i.F)(_),defaultValues:{name:"",targetUPH:0,docsPerUnit:1,videosPerUnit:1,isDisplayed:!0}}),G=(0,n.useCallback)(e=>{J(t=>F===e&&"asc"===t?"desc":"asc"),R(e)},[F]),V=e=>{var t;b(e),O.reset({name:e.name,targetUPH:e.targetUPH,docsPerUnit:e.docsPerUnit,videosPerUnit:e.videosPerUnit,isDisplayed:null===(t=e.isDisplayed)||void 0===t||t}),v(!0)},Z=e=>{w(!0);try{let t=d(e);E(e=>e.map(e=>({...e,isActive:e.id===t.id}))),g({title:"Target Activated",description:'"'.concat(t.name,'" is now the active target.')})}catch(e){console.error("Failed to set active target:",e),g({variant:"destructive",title:"Activation Failed",description:e instanceof Error?e.message:"Could not activate the target."})}finally{w(!1)}},X=(e,t)=>{let a=A.find(t=>t.id===e);if(a){if(a.isActive){g({variant:"destructive",title:"Deletion Blocked",description:"Cannot delete the currently active target. Set another target as active first."});return}if(!confirm('Are you sure you want to delete the target "'.concat(t,'"?')))return;w(!0);try{o(e),E(t=>t.filter(t=>t.id!==e)),g({title:"Target Deleted",description:'"'.concat(t,'" has been deleted.')})}catch(e){console.error("Failed to delete target:",e),g({variant:"destructive",title:"Deletion Failed",description:e instanceof Error?e.message:"Could not delete the target."})}finally{w(!1)}}},B=e=>{w(!0);try{let t=c(e);E(e=>[...e,t]),g({title:"Target Duplicated",description:'"'.concat(t.name,'" has been created as a copy.')})}catch(e){console.error("Failed to duplicate target:",e),g({variant:"destructive",title:"Duplication Failed",description:e instanceof Error?e.message:"Could not duplicate the target."})}finally{w(!1)}},Y=e=>{var t;w(!0);let a={...e,isDisplayed:!(null===(t=e.isDisplayed)||void 0===t||t)};try{let e=l(a);E(t=>t.map(t=>t.id===e.id?e:t)),g({title:"Display Updated",description:'Display for "'.concat(e.name,'" set to ').concat(e.isDisplayed,".")})}catch(e){console.error("Failed to update display status:",e),g({variant:"destructive",title:"Update Failed",description:"Could not update display status."})}finally{w(!1)}},q=e=>F!==e?(0,r.jsx)(T.Z,{className:"ml-2 h-4 w-4 opacity-50"}):(0,r.jsx)(T.Z,{className:"ml-2 h-4 w-4"});return(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(x.ll,{children:"UPH Target Manager"}),(0,r.jsxs)(D.Vq,{open:h,onOpenChange:v,children:[(0,r.jsx)(D.hg,{asChild:!0,children:(0,r.jsx)(u.z,{onClick:()=>{b(null),O.reset({name:"",targetUPH:0,docsPerUnit:1,videosPerUnit:1,isDisplayed:!0}),v(!0)},disabled:N,children:"Add New Target"})}),(0,r.jsxs)(D.cZ,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(D.fK,{children:[(0,r.jsx)(D.$N,{children:y?"Edit Target":"Add New Target"}),(0,r.jsx)(D.Be,{children:y?"Modify the details of this UPH target.":"Define a new UPH target and how many items make one unit."})]}),(0,r.jsx)(m.l0,{...O,children:(0,r.jsxs)("form",{onSubmit:O.handleSubmit(e=>{w(!0);try{var t,r,n;if(y){let a={...y,...e,isDisplayed:null===(r=null!==(t=e.isDisplayed)&&void 0!==t?t:y.isDisplayed)||void 0===r||r},n=l(a);E(e=>e.map(e=>e.id===y.id?n:e)),g({title:"Target Updated",description:'"'.concat(e.name,'" has been updated.')})}else{let t={...e,isDisplayed:null===(n=e.isDisplayed)||void 0===n||n},r=a(t);E(e=>[...e,r]),g({title:"Target Added",description:'"'.concat(e.name,'" has been added.')})}v(!1),O.reset({name:"",targetUPH:0,docsPerUnit:1,videosPerUnit:1,isDisplayed:!0}),b(null)}catch(e){console.error("Failed to save target:",e),g({variant:"destructive",title:"Save Failed",description:e instanceof Error?e.message:"Could not save the UPH target."})}finally{w(!1)}}),className:"space-y-4 py-4",children:[(0,r.jsx)(m.Wi,{control:O.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(m.xJ,{children:[(0,r.jsx)(m.lX,{children:"Target Name"}),(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{placeholder:"e.g., Standard Shift",...t})}),(0,r.jsx)(m.zG,{})]})}}),(0,r.jsx)(m.Wi,{control:O.control,name:"targetUPH",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[(0,r.jsx)(m.lX,{children:"Target UPH"}),(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"e.g., 15.5",...a,value:null!==(t=a.value)&&void 0!==t?t:"",onChange:e=>a.onChange(parseFloat(e.target.value)||0),step:"0.000001",min:"0.000001"})}),(0,r.jsx)(m.zG,{})]})}}),(0,r.jsx)(m.Wi,{control:O.control,name:"docsPerUnit",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[(0,r.jsx)(m.lX,{children:"Documents per Unit"}),(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"e.g., 5.25",...a,value:null!==(t=a.value)&&void 0!==t?t:"",onChange:e=>a.onChange(parseFloat(e.target.value)||0),step:"any",min:"0.000001"})}),(0,r.jsx)(m.zG,{})]})}}),(0,r.jsx)(m.Wi,{control:O.control,name:"videosPerUnit",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{children:[(0,r.jsx)(m.lX,{children:"Video Sessions per Unit"}),(0,r.jsx)(m.NI,{children:(0,r.jsx)(f.I,{type:"number",placeholder:"e.g., 2.55",...a,value:null!==(t=a.value)&&void 0!==t?t:"",onChange:e=>a.onChange(parseFloat(e.target.value)||0),step:"any",min:"0.000001"})}),(0,r.jsx)(m.zG,{})]})}}),(0,r.jsx)(m.Wi,{control:O.control,name:"isDisplayed",render:e=>{var t;let{field:a}=e;return(0,r.jsxs)(m.xJ,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(m.lX,{children:"Display on Dashboard"}),(0,r.jsxs)(D.Be,{className:"text-xs",children:[" ","Show this target in dashboard metrics."]})]}),(0,r.jsx)(m.NI,{children:(0,r.jsx)(H,{checked:null===(t=a.value)||void 0===t||t,onCheckedChange:a.onChange})})]})}}),(0,r.jsxs)(D.cN,{children:[(0,r.jsx)(D.GG,{asChild:!0,children:(0,r.jsx)(u.z,{type:"button",variant:"outline",onClick:()=>{v(!1),O.reset({name:"",targetUPH:0,docsPerUnit:1,videosPerUnit:1,isDisplayed:!0}),b(null)},children:"Cancel"})}),(0,r.jsx)(u.z,{type:"submit",disabled:N,children:N?"Saving...":y?"Save Changes":"Add Target"})]})]})})]})]})]}),(0,r.jsx)(x.aY,{children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(C.iA,{children:[(0,r.jsx)(C.xD,{children:(0,r.jsxs)(C.SC,{children:[(0,r.jsx)(C.ss,{className:"w-[50px]",children:"Active"}),(0,r.jsx)(C.ss,{className:"w-[60px]",children:"Display"})," ",(0,r.jsx)(C.ss,{children:(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>G("name"),className:"px-0 hover:bg-transparent",children:["Name",q("name")]})}),(0,r.jsx)(C.ss,{children:(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>G("targetUPH"),className:"px-0 hover:bg-transparent",children:["Target UPH",q("targetUPH")]})}),(0,r.jsx)(C.ss,{className:"hidden sm:table-cell",children:(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>G("docsPerUnit"),className:"px-0 hover:bg-transparent",children:["Docs / Unit",q("docsPerUnit")]})}),(0,r.jsx)(C.ss,{className:"hidden sm:table-cell",children:(0,r.jsxs)(u.z,{variant:"ghost",onClick:()=>G("videosPerUnit"),className:"px-0 hover:bg-transparent",children:["Videos / Unit",q("videosPerUnit")]})}),(0,r.jsx)(C.ss,{className:"w-[130px] text-right",children:"Actions"})]})}),(0,r.jsxs)(C.RM,{children:[0===L.length&&(0,r.jsxs)(C.SC,{children:[(0,r.jsx)(C.pj,{colSpan:7,className:"text-center text-muted-foreground h-24",children:"No UPH targets defined yet."})," "]}),L.map(e=>{var t,a,n,s;return(0,r.jsxs)(C.SC,{className:(0,p.cn)(e.isActive?"bg-accent/10":"",!(null===(t=e.isDisplayed)||void 0===t||t)&&"opacity-50 hover:opacity-75"),children:[(0,r.jsx)(C.pj,{className:"text-center",children:e.isActive?(0,r.jsx)(S.Z,{className:"h-5 w-5 text-accent mx-auto"}):(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>Z(e.id),disabled:N,title:"Set as Active","aria-label":"Set as Active",className:"p-1 h-8 w-8 mx-auto",children:(0,r.jsx)(k.Z,{className:"h-5 w-5 text-muted-foreground hover:text-foreground"})})}),(0,r.jsx)(C.pj,{className:"text-center",children:(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>Y(e),disabled:N,title:null===(a=e.isDisplayed)||void 0===a||a?"Hide on Dashboard":"Show on Dashboard","aria-label":null===(n=e.isDisplayed)||void 0===n||n?"Hide on Dashboard":"Show on Dashboard",className:"p-1 h-8 w-8 mx-auto",children:null===(s=e.isDisplayed)||void 0===s||s?(0,r.jsx)(I.Z,{className:"h-5 w-5 text-primary"}):(0,r.jsx)(P.Z,{className:"h-5 w-5 text-muted-foreground hover:text-foreground"})})}),(0,r.jsx)(C.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(C.pj,{children:e.targetUPH}),(0,r.jsx)(C.pj,{className:"hidden sm:table-cell",children:e.docsPerUnit}),(0,r.jsx)(C.pj,{className:"hidden sm:table-cell",children:e.videosPerUnit}),(0,r.jsxs)(C.pj,{className:"text-right",children:[(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>B(e.id),disabled:N,title:"Duplicate Target","aria-label":"Duplicate Target",className:"h-8 w-8 mr-1",children:(0,r.jsx)(M.Z,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>V(e),disabled:N,title:"Edit Target","aria-label":"Edit Target",className:"h-8 w-8 mr-1",children:(0,r.jsx)(U.Z,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive h-8 w-8",onClick:()=>X(e.id,e.name),disabled:N||e.isActive,title:e.isActive?"Cannot delete the active target":"Delete Target","aria-label":e.isActive?"Cannot delete the active target":"Delete Target",children:(0,r.jsx)(z.Z,{className:"h-4 w-4"})})]})]},e.id)})]})]})})})]})};function R(){let[e,t]=(0,n.useState)(null),[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),{toast:c}=(0,j.pm)(),u=(0,n.useCallback)(()=>{console.log("[LogInputPage] Loading data..."),d(!0);try{let e=(0,b.W1)(),a=(0,b.Gq)(),r=(0,b.Io)(),n=(0,p._3)(new Date),i=e.find(e=>e.date===n)||null;t(i),s(a),l(r),console.log("[LogInputPage] Data loaded:",{hasTodayLog:!!i,targets:a.length,active:!!r})}catch(e){console.error("[LogInputPage] Error loading data:",e),c({variant:"destructive",title:"Error Loading Data",description:"Could not load work logs or targets from local storage."})}finally{d(!1)}},[c]);(0,n.useEffect)(()=>{u()},[u]);let m=(0,n.useCallback)(e=>{try{let a=(0,b.zn)(e);return a.date===(0,p._3)(new Date)&&t(a),a}catch(e){throw console.error("[LogInputPage] Error saving work log:",e),e}},[]),f=(0,n.useCallback)(e=>{try{let t=(0,b.oG)(e);return s(e=>[...e,t]),t}catch(e){throw console.error("[LogInputPage] Error adding target:",e),c({variant:"destructive",title:"Add Target Failed",description:e instanceof Error?e.message:"Could not add the target."}),e}},[c]),g=(0,n.useCallback)(e=>{try{let t=(0,b.el)(e);return s(e=>e.map(e=>e.id===t.id?t:e)),t.isActive&&l(t),t}catch(e){throw console.error("[LogInputPage] Error updating target:",e),c({variant:"destructive",title:"Update Target Failed",description:e instanceof Error?e.message:"Could not update the target."}),e}},[c]),x=(0,n.useCallback)(e=>{try{let t=a.find(t=>t.id===e);if(null==t?void 0:t.isActive)throw c({variant:"destructive",title:"Deletion Blocked",description:"Cannot delete the currently active target. Set another target as active first."}),Error("Cannot delete the currently active target. Set another target as active first.");(0,b.iF)(e),s(t=>t.filter(t=>t.id!==e)),i&&i.id===e&&l(null),c({title:"Target Deleted",description:"UPH Target deleted successfully."})}catch(e){throw console.error("[LogInputPage] Error deleting target:",e),e instanceof Error&&e.message.includes("Cannot delete")||c({variant:"destructive",title:"Deletion Failed",description:e instanceof Error?e.message:"Could not delete the target."}),e}},[a,i,c]),h=(0,n.useCallback)(e=>{try{let t=(0,b.eU)(e);return s(e=>e.map(e=>({...e,isActive:e.id===t.id}))),l(t),c({title:"Target Activated",description:'"'.concat(t.name,'" is now the active target.')}),t}catch(e){throw console.error("[LogInputPage] Error setting active target:",e),c({variant:"destructive",title:"Activation Failed",description:e instanceof Error?e.message:"Could not activate the target."}),e}},[c]),v=(0,n.useCallback)(e=>{try{let t=(0,b.RY)(e);return s(e=>[...e,t]),t}catch(e){throw console.error("[LogInputPage] Error duplicating target:",e),c({variant:"destructive",title:"Duplication Failed",description:e instanceof Error?e.message:"Could not duplicate the target."}),e}},[c]);return o?(0,r.jsx)("div",{className:"flex min-h-[calc(100vh-10rem)] flex-col items-center justify-center p-4 md:p-6 lg:p-8",children:(0,r.jsx)("p",{className:"text-xl text-muted-foreground",children:"Loading Input Form..."})}):(0,r.jsxs)("div",{className:"w-full max-w-4xl mx-auto space-y-8 p-4 md:p-6 lg:p-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-6 md:mb-8 text-center",children:"Log Work & Manage Targets"}),(0,r.jsx)(w,{onWorkLogSaved:m,existingLog:e}),(0,r.jsx)(F,{targets:a,addUPHTargetAction:f,updateUPHTargetAction:g,deleteUPHTargetAction:x,setActiveUPHTargetAction:h,duplicateUPHTargetAction:v})]})}},69081:function(e,t,a){"use strict";a.d(t,{f:function(){return d}});var r=a(57437);a(2265);var n=a(70518),s=a(87592),i=a(52772),l=a(49354),o=a(89733);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,r.jsx)(i._W,{showOutsideDays:d,className:(0,l.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-8 w-8 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,o.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(n.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(s.Z,{className:"h-4 w-4"})}},...c})}d.displayName="Calendar"},54662:function(e,t,a){"use strict";a.d(t,{$N:function(){return x},Be:function(){return h},GG:function(){return u},Vq:function(){return o},cN:function(){return g},cZ:function(){return f},fK:function(){return p},hg:function(){return d}});var r=a(57437),n=a(2265),s=a(13304),i=a(74697),l=a(49354);let o=s.fC,d=s.xz,c=s.h_,u=s.x8,m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});m.displayName=s.aV.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[n,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=s.VY.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let g=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="DialogFooter";let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});x.displayName=s.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...n})});h.displayName=s.dk.displayName},93363:function(e,t,a){"use strict";a.d(t,{NI:function(){return x},Wi:function(){return u},l0:function(){return d},lX:function(){return g},pf:function(){return h},xJ:function(){return p},zG:function(){return v}});var r=a(57437),n=a(2265),s=a(71538),i=a(39343),l=a(49354),o=a(70402);let d=i.RV,c=n.createContext({}),u=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(i.Qr,{...t})})},m=()=>{let e=n.useContext(c),t=n.useContext(f),{getFieldState:a,formState:r}=(0,i.Gc)(),s=a(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},f=n.createContext({}),p=n.forwardRef((e,t)=>{let{className:a,...s}=e,i=n.useId();return(0,r.jsx)(f.Provider,{value:{id:i},children:(0,r.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",a),...s})})});p.displayName="FormItem";let g=n.forwardRef((e,t)=>{let{className:a,...n}=e,{error:s,formItemId:i}=m();return(0,r.jsx)(o._,{ref:t,className:(0,l.cn)(s&&"text-destructive",a),htmlFor:i,...n})});g.displayName="FormLabel";let x=n.forwardRef((e,t)=>{let{...a}=e,{error:n,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,r.jsx)(s.g7,{ref:t,id:i,"aria-describedby":n?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!n,...a})});x.displayName="FormControl";let h=n.forwardRef((e,t)=>{let{className:a,...n}=e,{formDescriptionId:s}=m();return(0,r.jsx)("p",{ref:t,id:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...n})});h.displayName="FormDescription";let v=n.forwardRef((e,t)=>{var a;let{className:n,children:s,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!==(a=null==o?void 0:o.message)&&void 0!==a?a:""):s;return c?(0,r.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",n),...i,children:c}):null});v.displayName="FormMessage"},77209:function(e,t,a){"use strict";a.d(t,{I:function(){return i}});var r=a(57437),n=a(2265),s=a(49354);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},70402:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var r=a(57437),n=a(2265),s=a(38364),i=a(13027),l=a(49354);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,l.cn)(o(),a),...n})});d.displayName=s.f.displayName},21413:function(e,t,a){"use strict";a.d(t,{J2:function(){return l},xo:function(){return o},yk:function(){return d}});var r=a(57437),n=a(2265),s=a(61485),i=a(49354);let l=s.fC,o=s.xz,d=n.forwardRef((e,t)=>{let{className:a,align:n="center",sideOffset:l=4,...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsx)(s.VY,{ref:t,align:n,sideOffset:l,className:(0,i.cn)("z-50 w-auto rounded-md border bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...o})})});d.displayName=s.VY.displayName},47304:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var r=a(57437),n=a(2265),s=a(49354);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...n})})});i.displayName="Table";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...n})});l.displayName="TableHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...n})});o.displayName="TableBody",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:a,children:i,...l}=e,o=n.Children.toArray(i).filter(e=>"string"!=typeof e||""!==e.trim());return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l,children:o})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...n})}).displayName="TableCaption"},86763:function(e,t,a){"use strict";a.d(t,{pm:function(){return m}});var r=a(2265);let n=0,s=new Map,i=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[472,631,767,17,772,56,572,733,544,971,23,744],function(){return e(e.s=70908)}),_N_E=e.O()}]);