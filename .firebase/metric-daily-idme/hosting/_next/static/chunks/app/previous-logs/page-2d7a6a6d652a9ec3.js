(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{97286:function(e,t,a){Promise.resolve().then(a.bind(a,14661))},56900:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]])},404:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},58184:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(78030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},14661:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var s=a(57437),r=a(2265),o=a(8618),n=a(61016),l=a(49354),i=a(86763),d=a(89733),c=a(77209),u=a(21413),m=a(69081),f=a(48185),p=a(56900),x=a(58184),g=a(404),h=a(74697),v=a(24241),y=a(21900),b=a(80624),w=a(4716),j=a(35062),k=a(90620),N=a(62230),S=a(71475),C=a(1774),L=a(71459),D=a(70218),_=a(29973);function z(){let[e,t]=(0,r.useState)([]),[a,z]=(0,r.useState)([]),[P,E]=(0,r.useState)(!0),{toast:O}=(0,i.pm)(),[T,Z]=(0,r.useState)(""),[W,U]=(0,r.useState)(void 0),[A,F]=(0,r.useState)(!1),[M,J]=(0,r.useState)("date"),[R,H]=(0,r.useState)("desc"),[I,Y]=(0,r.useState)(1),q=(0,r.useMemo)(()=>a.find(e=>{var t;return e.isActive&&(null===(t=e.isDisplayed)||void 0===t||t)})||a.find(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t})||(a.length>0?a[0]:null),[a]),G=(0,r.useCallback)(()=>{console.log("[PreviousLogsPage] Loading data..."),E(!0);try{let e=(0,n.W1)(),a=(0,n.Gq)();t(e),z(a),console.log("[PreviousLogsPage] Data loaded:",{logs:e.length,targets:a.length})}catch(e){console.error("[PreviousLogsPage] Error loading data:",e),O({variant:"destructive",title:"Error Loading Data",description:"Could not load previous work logs or targets."})}finally{E(!1)}},[O]);(0,r.useEffect)(()=>{G()},[G]);let V=(0,r.useCallback)(e=>{try{(0,n.Rd)(e),G(),O({title:"Log Deleted",description:"Previous work log deleted successfully."})}catch(e){throw console.error("[PreviousLogsPage] Error deleting work log:",e),O({variant:"destructive",title:"Deletion Failed",description:e instanceof Error?e.message:"Could not delete the work log."}),e}},[O,G]),Q=(0,r.useMemo)(()=>{let t=(0,y.b)(new Date),s=e.filter(e=>{let a=(0,b.D)(e.date+"T00:00:00");if(!(0,w.J)(a))return!1;let s=(0,j.R)(a,t),r=e.date===(0,l._3)(new Date)&&e.isFinalized;return s||r});return T&&(s=s.filter(e=>{var t;let s=T.toLowerCase(),r=null!==(t=a.find(t=>t.id===e.targetId))&&void 0!==t?t:q,o=(0,b.D)(e.date+"T00:00:00"),n=r?(0,l.Jf)(e,r):0;return e.date.toLowerCase().includes(s)||e.startTime.toLowerCase().includes(s)||e.endTime.toLowerCase().includes(s)||e.hoursWorked.toString().includes(s)||e.documentsCompleted.toString().includes(s)||e.videoSessionsCompleted.toString().includes(s)||e.notes&&e.notes.toLowerCase().includes(s)||(0,w.J)(o)&&(0,k.WU)(o,"PPP").toLowerCase().includes(s)||r&&n.toFixed(2).includes(s)})),(null==W?void 0:W.from)&&(s=s.filter(e=>{let t=(0,b.D)(e.date+"T00:00:00");return(0,w.J)(t)&&t>=(0,y.b)(W.from)})),(null==W?void 0:W.to)&&(s=s.filter(e=>{let t=(0,b.D)(e.date+"T00:00:00");return(0,w.J)(t)&&t<=(0,N.i)(W.to)})),M&&s.sort((e,t)=>{let s,r;if("date"===M)s=(0,b.D)(e.date+"T00:00:00"),r=(0,b.D)(t.date+"T00:00:00");else if("avgUPH"===M){var o,n;let i=null!==(o=a.find(t=>t.id===e.targetId))&&void 0!==o?o:q,d=null!==(n=a.find(e=>e.id===t.targetId))&&void 0!==n?n:q;s=i?(0,l.Jf)(e,i):0,r=d?(0,l.Jf)(t,d):0}else{let a=e[M],o=t[M];s="boolean"==typeof a?a?1:0:"object"==typeof a?0:null!=a?a:0,r="boolean"==typeof o?o?1:0:"object"==typeof o?0:null!=o?o:0}let i=0;return i=s instanceof Date&&r instanceof Date?s.getTime()-r.getTime():"number"==typeof s&&"number"==typeof r?s-r:"string"==typeof s&&"string"==typeof r?s.localeCompare(r):String(s).localeCompare(String(r)),"asc"===R?i:-i}),s},[e,T,W,M,R,q,a]),X=(0,r.useMemo)(()=>{let e=(I-1)*10;return Q.slice(e,e+10)},[Q,I]),B=(0,r.useMemo)(()=>Math.ceil(Q.length/10),[Q]),K=(0,r.useCallback)(e=>{M===e?H(e=>"asc"===e?"desc":"asc"):(J(e),H("asc")),Y(1)},[M]),$=T||W||"date"!==M||"desc"!==R,ee=e=>{U(e),Y(1),F(!1)},et=new Date,ea=[{label:"Yesterday",range:{from:(0,y.b)((0,S.k)(et,1)),to:(0,N.i)((0,S.k)(et,1))}},{label:"This Week",range:{from:(0,C.z)(et,{weekStartsOn:1}),to:(0,N.i)(et)}},{label:"Last Week",range:{from:(0,C.z)((0,L.t)(et,1),{weekStartsOn:1}),to:(0,D.v)((0,L.t)(et,1),{weekStartsOn:1})}},{label:"Last 7 Days",range:{from:(0,y.b)((0,S.k)(et,6)),to:(0,N.i)(et)}},{label:"Last 30 Days",range:{from:(0,y.b)((0,S.k)(et,29)),to:(0,N.i)(et)}}],es=(0,r.useCallback)((e,t)=>{let a=new Blob([e],{type:"application/json;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let e=URL.createObjectURL(a);s.setAttribute("href",e),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e)}else O({variant:"destructive",title:"Download Failed",description:"Your browser does not support direct JSON downloads."})},[O]),er=(0,r.useCallback)(()=>{try{let e=(0,n.W1)(),t=(0,n.Gq)(),a=(0,n.FA)(),s=(0,n.Ok)(),r=(0,n.cQ)();if(0===e.length&&0===t.length&&0===a.length){O({title:"No Data to Export",description:"There is no application data to export."});return}let o=JSON.stringify({workLogs:e,uphTargets:t,auditLogs:a,userSettings:s,sampleDataLoaded:r},null,2),l=new Date().toISOString().replace(/[:.]/g,"-");es(o,"metric_daily_backup_".concat(l,".json")),O({title:"Export Successful",description:"All application data has been exported to a JSON file."}),(0,n.l9)("SYSTEM_EXPORT_DATA","System","Exported all application data to JSON.")}catch(e){console.error("Error exporting data:",e),O({variant:"destructive",title:"Export Failed",description:"An error occurred while preparing the data for export."}),(0,n.l9)("SYSTEM_EXPORT_DATA_FAILED","System","Failed to export application data to JSON. Error: ".concat(e instanceof Error?e.message:String(e)))}},[es,O]),eo=e=>M!==e?(0,s.jsx)(p.Z,{className:"ml-1 h-3 w-3 opacity-30"}):"asc"===R?(0,s.jsx)(p.Z,{className:"ml-1 h-3 w-3 transform rotate-180"}):(0,s.jsx)(p.Z,{className:"ml-1 h-3 w-3"});if(P)return(0,s.jsx)("div",{className:"flex min-h-[calc(100vh-10rem)] flex-col items-center justify-center p-4 md:p-6 lg:p-8",children:(0,s.jsx)("p",{className:"text-xl text-muted-foreground",children:"Loading Previous Logs..."})});let en=a.filter(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t});return(0,s.jsxs)("div",{className:"w-full max-w-7xl mx-auto space-y-8 p-4 md:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 md:mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-center sm:text-left",children:"Previous Work Logs"}),(0,s.jsxs)(d.z,{onClick:er,children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4"})," Export All Data (JSON)"]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{children:[(0,s.jsxs)(f.ll,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"})," Filter & Sort Logs"]}),(0,s.jsx)(f.SZ,{children:"Refine and order the list of previous work logs displayed below. Export includes all data."})]}),(0,s.jsxs)(f.aY,{className:"space-y-4 pt-2",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[(0,s.jsx)(c.I,{type:"text",placeholder:"Search notes, date, counts, UPH...",value:T,onChange:e=>{Z(e.target.value),Y(1)},className:"flex-grow p-2 border border-input rounded-md text-sm focus:ring-ring focus:outline-none focus:ring-2 bg-background text-foreground","aria-label":"Search previous logs"}),T&&(0,s.jsx)(d.z,{variant:"ghost",size:"icon",onClick:()=>{Z(""),Y(1)},className:"h-8 w-8 md:ml-[-40px]",title:"Clear search",children:(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)(u.J2,{open:A,onOpenChange:F,children:[(0,s.jsx)(u.xo,{asChild:!0,children:(0,s.jsxs)(d.z,{id:"date",variant:"outline",className:(0,l.cn)("w-full md:w-[280px] justify-start text-left font-normal h-9 text-sm",!W&&"text-muted-foreground"),children:[(0,s.jsx)(v.Z,{className:"mr-2 h-4 w-4"}),(null==W?void 0:W.from)?W.to?(0,s.jsxs)(s.Fragment,{children:[(0,k.WU)(W.from,"LLL dd, y")," -"," ",(0,k.WU)(W.to,"LLL dd, y")]}):(0,k.WU)(W.from,"LLL dd, y"):(0,s.jsx)("span",{children:"Filter by Date Range"})]})}),(0,s.jsxs)(u.yk,{className:"w-auto p-0 flex flex-col sm:flex-row",align:"start",children:[(0,s.jsxs)("div",{className:"flex flex-col p-2 border-b sm:border-r sm:border-b-0",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-muted-foreground px-2 py-1",children:"Presets"}),ea.map(e=>(0,s.jsx)(d.z,{variant:"ghost",size:"sm",className:"justify-start text-sm font-normal h-8",onClick:()=>ee(e.range),children:e.label},e.label)),(0,s.jsx)(_.Z,{className:"my-1"}),(0,s.jsx)(d.z,{variant:"ghost",size:"sm",className:"justify-start text-sm font-normal h-8 text-muted-foreground",onClick:()=>ee(void 0),children:"Clear"})]}),(0,s.jsx)(m.f,{initialFocus:!0,mode:"range",defaultMonth:null==W?void 0:W.from,selected:W,onSelect:e=>{U(e),Y(1)},numberOfMonths:1,disabled:e=>e>=(0,y.b)(new Date)||e<new Date("2023-01-01")})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground mr-2",children:"Sort by:"}),(0,s.jsxs)(d.z,{variant:"date"===M?"secondary":"ghost",size:"sm",onClick:()=>K("date"),children:["Date ",eo("date")]}),(0,s.jsxs)(d.z,{variant:"hoursWorked"===M?"secondary":"ghost",size:"sm",onClick:()=>K("hoursWorked"),children:["Hours ",eo("hoursWorked")]}),(0,s.jsxs)(d.z,{variant:"documentsCompleted"===M?"secondary":"ghost",size:"sm",onClick:()=>K("documentsCompleted"),children:["Docs ",eo("documentsCompleted")]}),(0,s.jsxs)(d.z,{variant:"videoSessionsCompleted"===M?"secondary":"ghost",size:"sm",onClick:()=>K("videoSessionsCompleted"),children:["Videos ",eo("videoSessionsCompleted")]}),(0,s.jsxs)(d.z,{variant:"avgUPH"===M?"secondary":"ghost",size:"sm",onClick:()=>K("avgUPH"),children:["Avg UPH ",eo("avgUPH")]})]}),$&&(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(d.z,{variant:"link",size:"sm",onClick:()=>{Z(""),U(void 0),J("date"),H("desc"),Y(1)},className:"p-0 h-auto text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(h.Z,{className:"mr-1 h-3 w-3"})," Reset Filters & Sort"]})})]})]}),(0,s.jsx)(o.Z,{allWorkLogs:X,targets:en,deleteWorkLogAction:V,showTodaySection:!1,onGoalMet:()=>{}}),B>1&&(0,s.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t",children:[(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>Y(e=>Math.max(1,e-1)),disabled:1===I,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",I," of ",B]}),(0,s.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>Y(e=>Math.min(B,e+1)),disabled:I===B,children:"Next"})]}),0===Q.length&&!P&&(0,s.jsx)("p",{className:"text-center text-muted-foreground py-10",children:0===e.filter(e=>e.isFinalized||(0,j.R)((0,b.D)(e.date+"T00:00:00"),(0,y.b)(new Date))).length?"No previous work logs found.":"No logs match your filters."})]})}},69081:function(e,t,a){"use strict";a.d(t,{f:function(){return d}});var s=a(57437);a(2265);var r=a(70518),o=a(87592),n=a(52772),l=a(49354),i=a(89733);function d(e){let{className:t,classNames:a,showOutsideDays:d=!0,...c}=e;return(0,s.jsx)(n._W,{showOutsideDays:d,className:(0,l.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,i.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-8 w-8 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,i.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(r.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(o.Z,{className:"h-4 w-4"})}},...c})}d.displayName="Calendar"},48484:function(e,t,a){"use strict";a.d(t,{f:function(){return d}});var s=a(2265),r=a(25171),o=a(57437),n="horizontal",l=["horizontal","vertical"],i=s.forwardRef((e,t)=>{let{decorative:a,orientation:s=n,...i}=e,d=l.includes(s)?s:n;return(0,o.jsx)(r.WV.div,{"data-orientation":d,...a?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...i,ref:t})});i.displayName="Separator";var d=i},62230:function(e,t,a){"use strict";a.d(t,{i:function(){return r}});var s=a(74546);function r(e){let t=(0,s.Q)(e);return t.setHours(23,59,59,999),t}},71459:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});var s=a(78335);function r(e,t){return(0,s.j)(e,-t)}}},function(e){e.O(0,[472,631,767,17,772,476,733,544,37,971,23,744],function(){return e(e.s=97286)}),_N_E=e.O()}]);