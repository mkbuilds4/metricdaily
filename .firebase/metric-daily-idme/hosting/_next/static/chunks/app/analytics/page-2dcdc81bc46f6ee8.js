(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{17779:function(e,t,a){Promise.resolve().then(a.bind(a,74013))},74013:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return er}});var r=a(57437),s=a(2265),l=a(61016),o=a(48185),n=a(35231),d=a(85475),i=a(20153),c=a(96581),u=a(78703),m=a(49354);let f={light:"",dark:".dark"},x=s.createContext(null);function h(){let e=s.useContext(x);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let p=s.forwardRef((e,t)=>{let{id:a,className:l,children:o,config:d,...i}=e,c=s.useId(),u="chart-".concat(a||c.replace(/:/g,""));return(0,r.jsx)(x.Provider,{value:{config:d},children:(0,r.jsxs)("div",{"data-chart":u,ref:t,className:(0,m.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line]:stroke-[var(--color-border)] [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none","[&_.recharts-cartesian-grid_line]:stroke-border/50",l),...i,children:[(0,r.jsx)(g,{id:u,config:d}),(0,r.jsx)(n.h,{children:o})]})})});p.displayName="Chart";let g=e=>{let{id:t,config:a}=e,s=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(f).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n  --color-border: hsl(var(--border));\n").concat(s.map(e=>{var t;let[r,s]=e,l=(null===(t=s.theme)||void 0===t?void 0:t[a])||s.color;return l?"  --color-".concat(r,": ").concat(l,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},v=d.u,y=s.forwardRef((e,t)=>{let{active:a,payload:l,className:o,indicator:n="dot",hideLabel:d=!1,hideIndicator:i=!1,label:c,labelFormatter:u,labelClassName:f,formatter:x,color:p,nameKey:g,labelKey:v}=e,{config:y}=h(),j=s.useMemo(()=>{var e;if(d||!(null==l?void 0:l.length))return null;let[t]=l,a="".concat(v||t.dataKey||t.name||"value"),s=N(y,t,a),o=v||"string"!=typeof c?null==s?void 0:s.label:(null===(e=y[c])||void 0===e?void 0:e.label)||c;return u?(0,r.jsx)("div",{className:(0,m.cn)("font-medium",f),children:u(o,l)}):o?(0,r.jsx)("div",{className:(0,m.cn)("font-medium",f),children:o}):null},[c,u,l,d,f,y,v]);if(!a||!(null==l?void 0:l.length))return null;let b=1===l.length&&"dot"!==n;return(0,r.jsxs)("div",{ref:t,className:(0,m.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",o),children:[b?null:j,(0,r.jsx)("div",{className:"grid gap-1.5",children:l.map((e,t)=>{let a="".concat(g||e.name||e.dataKey||"value"),s=N(y,e,a),l=p||e.payload.fill||e.color||"var(--color-".concat(a,")");return(0,r.jsx)("div",{className:(0,m.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===n&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,r.jsxs)(r.Fragment,{children:[(null==s?void 0:s.icon)?(0,r.jsx)(s.icon,{}):!i&&(0,r.jsx)("div",{className:(0,m.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":b&&"dashed"===n}),style:{"--color-bg":l,"--color-border":l}}),(0,r.jsxs)("div",{className:(0,m.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,r.jsxs)("div",{className:"grid gap-1.5",children:[b?j:null,(0,r.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,r.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:"number"==typeof e.value?e.value.toLocaleString():String(e.value)})]})]})},e.dataKey)})})]})});y.displayName="ChartTooltip";let j=i.D;c._,u.e;let b=s.forwardRef((e,t)=>{let{className:a,hideIcon:s=!1,payload:l,verticalAlign:o="bottom",nameKey:n}=e,{config:d}=h();return(null==l?void 0:l.length)?(0,r.jsx)("div",{ref:t,className:(0,m.cn)("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",a),children:l.map(e=>{let t="".concat(n||e.dataKey||"value"),a=N(d,e,t);return(0,r.jsxs)("div",{className:(0,m.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!s?(0,r.jsx)(a.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function N(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=a;return a in t&&"string"==typeof t[a]?s=t[a]:r&&a in r&&"string"==typeof r[a]&&(s=r[a]),s in e?e[s]:e[a]}b.displayName="ChartLegend";var w=a(25974),k=a(54142),S=a(2842),D=a(9542),L=a(45745),_=a(92566),M=a(16638),C=a(92893),P=a(21900),U=a(62230),W=a(80624),z=a(4716),H=a(93275),Y=a(90620),Z=a(75804),F=a(67206),R=a(47603),I=a(71475),K=a(1774),O=a(71459),A=a(70218),T=a(89733),V=a(21413),E=a(69081),J=a(40933),B=a(6540),q=a(68954),G=a(404),$=a(24241),Q=a(74697),X=a(53225),ee=a(29973),et=a(8120);let ea={documents:"hsl(var(--chart-1))",videos:"hsl(var(--chart-2))",uph:"hsl(var(--chart-3))",targetUPHLine:"hsl(var(--destructive))",hoursWorked:"hsl(var(--chart-5))",hourlyDocuments:"hsl(var(--chart-1))",hourlyVideos:"hsl(var(--chart-2))"};function er(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[d,i]=(0,s.useState)([]),[u,f]=(0,s.useState)(null),[x,h]=(0,s.useState)(!0),[g,N]=(0,s.useState)(()=>({from:(0,P.b)(new Date),to:(0,U.i)(new Date)})),[er,es]=(0,s.useState)(!1),[el,eo]=(0,s.useState)(void 0),en=(0,s.useCallback)(()=>{h(!0);try{let e=(0,l.W1)(),a=(0,l.FA)(),r=(0,l.Gq)(),s=(0,l.Io)();t(e),n(a),i(r),f(s),console.log("[AnalyticsPage] Data loaded:",{logs:e.length,auditLogs:a.length,targets:r.length})}catch(e){console.error("[AnalyticsPage] Error loading data:",e)}finally{h(!1)}},[]);(0,s.useEffect)(()=>{en()},[en]),(0,s.useEffect)(()=>{if(d.length>0){let e=u&&d.find(e=>{var t;return e.id===u.id&&(null===(t=e.isDisplayed)||void 0===t||t)});if(e)eo(e.id);else{let e=d.find(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t});e?eo(e.id):d.length>0?eo(d[0].id):eo(void 0)}}else eo(void 0)},[d,u]);let ed=(0,s.useMemo)(()=>e.filter(e=>{let t=(0,W.D)(e.date+"T00:00:00");if(!(0,z.J)(t))return!1;let a=!0;return(null==g?void 0:g.from)&&(a=t>=(0,P.b)(g.from)),(null==g?void 0:g.to)&&(a=a&&t<=(0,U.i)(g.to)),a}),[e,g]),ei=(0,s.useMemo)(()=>!!((null==g?void 0:g.from)&&(null==g?void 0:g.to)&&(0,H.K)(g.from,g.to)),[g]),ec=(0,s.useMemo)(()=>ei||(null==g?void 0:g.from)&&!(null==g?void 0:g.to)?g.from:null,[g,ei]),eu=(0,s.useMemo)(()=>[...ed].sort((e,t)=>e.date.localeCompare(t.date)).map(e=>{var t;let a=(0,W.D)(e.date),r=null!==(t=d.find(t=>t.id===e.targetId))&&void 0!==t?t:u,s=r?(0,m.Jf)(e,r):null;return{date:(0,Y.WU)(a,"MMM d"),fullDate:e.date,documents:e.documentsCompleted,videos:e.videoSessionsCompleted,hoursWorked:e.hoursWorked,uph:null!==s&&isFinite(s)?s:0}}),[ed,d,u]),em=(0,s.useMemo)(()=>{let e=d.find(e=>e.id===el);return e?[...ed].sort((e,t)=>e.date.localeCompare(t.date)).map(t=>{let a=(0,W.D)(t.date),r=(0,m.Jf)(t,e);return{date:(0,Y.WU)(a,"MMM d"),fullDate:t.date,uph:null!==r&&isFinite(r)?r:0}}):[]},[ed,d,el]),ef=(0,s.useMemo)(()=>{var e,t,r,s,l,o,n,d,i,c;if(!ec||!a||0===a.length)return[];let u=(0,P.b)(ec),m=(0,U.i)(ec),f="".concat((0,Z.S)(ec),"-").concat((0,F.B)(ec)),x=a.filter(e=>{if("WorkLog"!==e.entityType)return!1;let t=(0,W.D)(e.timestamp);if(!(0,z.J)(t)||!(t>=u&&t<=m))return!1;let a=null;if(e.newState&&"object"==typeof e.newState&&"date"in e.newState&&"string"==typeof e.newState.date?a=e.newState.date:e.previousState&&"object"==typeof e.previousState&&"date"in e.previousState&&"string"==typeof e.previousState.date&&(a=e.previousState.date),a){let e=(0,W.D)(a+"T00:00:00");if((0,z.J)(e)&&"".concat((0,Z.S)(e),"-").concat((0,F.B)(e))!==f)return!1}return!0}).sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());if(0===x.length)return[];let h={},p=24,g=-1;for(let a of x)if(a.newState&&"object"==typeof a.newState){let n=a.newState;if(void 0!==n.documentsCompleted||void 0!==n.videoSessionsCompleted){let d=(0,W.D)(a.timestamp);if((0,z.J)(d)){let i=(0,R.p)(d);p=Math.min(p,i),g=Math.max(g,i),h[i]={documents:null!==(s=null!==(r=n.documentsCompleted)&&void 0!==r?r:null===(e=h[i])||void 0===e?void 0:e.documents)&&void 0!==s?s:0,videos:null!==(o=null!==(l=n.videoSessionsCompleted)&&void 0!==l?l:null===(t=h[i])||void 0===t?void 0:t.videos)&&void 0!==o?o:0,timestamp:a.timestamp}}}}else if(a.previousState&&"object"==typeof a.previousState){let e=a.previousState;if(void 0!==e.documentsCompleted||void 0!==e.videoSessionsCompleted){let t=(0,W.D)(a.timestamp);if((0,z.J)(t)){let r=(0,R.p)(t);p=Math.min(p,r),g=Math.max(g,r),h[r]||(h[r]={documents:null!==(n=e.documentsCompleted)&&void 0!==n?n:0,videos:null!==(d=e.videoSessionsCompleted)&&void 0!==d?d:0,timestamp:a.timestamp})}}}if(p>g)return[];let v={},y={documents:0,videos:0},j=x[0];if((null==j?void 0:j.previousState)&&"object"==typeof j.previousState){let e=j.previousState;y={documents:null!==(i=e.documentsCompleted)&&void 0!==i?i:0,videos:null!==(c=e.videoSessionsCompleted)&&void 0!==c?c:0}}for(let e=p;e<=g;e++){let t=h[e],a=t?{documents:t.documents,videos:t.videos}:y,r=Math.max(0,a.documents-y.documents),s=Math.max(0,a.videos-y.videos);v[e]={documents:r,videos:s},t&&(y=a)}return Object.entries(v).map(e=>{let[t,a]=e;return{hour:parseInt(t,10),hourLabel:"".concat(String(t).padStart(2,"0"),":00"),documents:a.documents,videos:a.videos}}).sort((e,t)=>e.hour-t.hour)},[ec,a]),ex={documents:{label:"Documents",color:ea.documents},videos:{label:"Videos",color:ea.videos},hoursWorked:{label:"Hours Worked",color:ea.hoursWorked}},eh={uph:{label:"Actual UPH",color:ea.uph},targetUPHLine:{label:"Target UPH",color:ea.targetUPHLine}},ep={documents:{label:"Docs",color:ea.hourlyDocuments},videos:{label:"Videos",color:ea.hourlyVideos}},eg=e=>{N(e),es(!1)},ev=new Date,ey=[{label:"Today",range:{from:(0,P.b)(ev),to:(0,U.i)(ev)}},{label:"Yesterday",range:{from:(0,P.b)((0,I.k)(ev,1)),to:(0,U.i)((0,I.k)(ev,1))}},{label:"Last 7 Days",range:{from:(0,P.b)((0,I.k)(ev,6)),to:(0,U.i)(ev)}},{label:"Last 30 Days",range:{from:(0,P.b)((0,I.k)(ev,29)),to:(0,U.i)(ev)}},{label:"This Week",range:{from:(0,K.z)(ev,{weekStartsOn:1}),to:(0,U.i)(ev)}},{label:"Last Week",range:{from:(0,K.z)((0,O.t)(ev,1),{weekStartsOn:1}),to:(0,A.v)((0,O.t)(ev,1),{weekStartsOn:1})}},{label:"This Month",range:{from:(0,P.b)(new Date(ev.getFullYear(),ev.getMonth(),1)),to:(0,U.i)(ev)}},{label:"Last Month",range:{from:(0,P.b)(new Date(ev.getFullYear(),ev.getMonth()-1,1)),to:(0,U.i)(new Date(ev.getFullYear(),ev.getMonth(),0))}}],ej=(0,s.useMemo)(()=>{let e=eu.reduce((e,t)=>e+t.documents,0),t=eu.reduce((e,t)=>e+t.videos,0),a=eu.filter(e=>e.uph>0),r=a.length>0?a.reduce((e,t)=>e+t.uph,0)/a.length:0,s=eu.length;return{totalDocs:e,totalVideos:t,avgUPH:parseFloat(r.toFixed(2)),daysLogged:s}},[eu]),eb=(0,s.useMemo)(()=>d.filter(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t}).map(e=>({value:e.id,label:"".concat(e.name," (Goal: ").concat(e.targetUPH.toFixed(1),")")})),[d]),eN=()=>(0,r.jsxs)(o.Zb,{className:"lg:col-span-2",children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(J.Z,{className:"h-5 w-5"})," Hourly Completions (from Audit Log)"]}),(0,r.jsxs)(o.SZ,{children:["Actual documents ",(0,r.jsx)(B.Z,{className:"inline h-4 w-4"})," and videos ",(0,r.jsx)(q.Z,{className:"inline h-4 w-4"})," completed per hour, based on logged updates in the audit trail.",ec?" (".concat((0,Y.WU)(ec,"MMM d, yyyy"),")"):""]})]}),(0,r.jsx)(o.aY,{children:ec?ef.length>0?(0,r.jsx)(p,{config:ep,className:"h-[300px] w-full",children:(0,r.jsxs)(w.v,{data:ef,margin:{top:20,right:20,left:-10,bottom:5},children:[(0,r.jsx)(k.q,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,r.jsx)(S.K,{dataKey:"hourLabel",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},angle:ef.length>10?-45:0,textAnchor:ef.length>10?"end":"middle",interval:ef.length>14?1:0}),(0,r.jsx)(D.B,{tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},allowDecimals:!1,label:{value:"Total Sessions Completed",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"hsl(var(--muted-foreground))",fontSize:12},dy:70}}),(0,r.jsx)(v,{cursor:!1,content:(0,r.jsx)(y,{indicator:"line"})}),(0,r.jsx)(L.$,{dataKey:"documents",stackId:"a",fill:ea.hourlyDocuments,radius:[0,0,0,0],name:"Docs"}),(0,r.jsx)(L.$,{dataKey:"videos",stackId:"a",fill:ea.hourlyVideos,radius:[4,4,0,0],name:"Videos"}),(0,r.jsx)(j,{content:(0,r.jsx)(b,{})})]})}):(0,r.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,r.jsxs)("p",{className:"text-muted-foreground",children:["No completion updates found in audit log for ",(0,Y.WU)(ec,"MMM d, yyyy"),"."]})}):(0,r.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Please select a single day in the date range filter to view hourly completions."})})})]}),ew=()=>(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsx)(o.ll,{children:"Daily Completed Items & Hours"}),(0,r.jsx)(o.SZ,{children:"Documents, Videos, and Hours Worked per day."})]}),(0,r.jsx)(o.aY,{children:eu.length>0?(0,r.jsx)(p,{config:ex,className:"h-[300px] w-full",children:(0,r.jsxs)(_.w,{data:eu,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,r.jsx)(k.q,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,r.jsx)(S.K,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),(0,r.jsx)(D.B,{yAxisId:"left",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},domain:["auto","auto"],allowDecimals:!1}),(0,r.jsx)(D.B,{yAxisId:"right",orientation:"right",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},domain:["auto","auto"],allowDecimals:!0,tickFormatter:e=>e.toFixed(1)}),(0,r.jsx)(v,{cursor:!1,content:(0,r.jsx)(y,{indicator:"line",labelFormatter:(e,t)=>{var a;if(t&&t.length>0&&(null===(a=t[0].payload)||void 0===a?void 0:a.fullDate))try{return(0,Y.WU)((0,W.D)(t[0].payload.fullDate),"PPP")}catch(e){console.warn("Invalid date in tooltip payload:",t[0].payload.fullDate)}return e},formatter:(e,t,a)=>{let s="",l="";return"documents"===t?(s="Docs:",l=ea.documents):"videos"===t?(s="Videos:",l=ea.videos):"hoursWorked"===t&&(s="Hours:",l=ea.hoursWorked,e="number"==typeof e?e.toFixed(2):e),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:l}}),(0,r.jsxs)("div",{className:"flex flex-1 justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:s}),(0,r.jsx)("span",{className:"font-medium",children:e})]})]})}})}),(0,r.jsx)(M.x,{yAxisId:"left",type:"monotone",dataKey:"documents",stroke:ea.documents,strokeWidth:2,dot:!1,name:"documents"}),(0,r.jsx)(M.x,{yAxisId:"left",type:"monotone",dataKey:"videos",stroke:ea.videos,strokeWidth:2,dot:!1,name:"videos"}),(0,r.jsx)(M.x,{yAxisId:"right",type:"monotone",dataKey:"hoursWorked",stroke:ea.hoursWorked,strokeWidth:2,strokeDasharray:"5 5",dot:!1,name:"hoursWorked"}),(0,r.jsx)(j,{content:(0,r.jsx)(b,{})})]})}):(0,r.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"No data available for the selected range."})})})]}),ek=()=>{var e;let t=d.find(e=>e.id===el),a=Math.max(...em.map(e=>e.uph),null!==(e=null==t?void 0:t.targetUPH)&&void 0!==e?e:0);return(0,r.jsxs)(o.Zb,{children:[(0,r.jsx)(o.Ol,{children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(o.ll,{children:"Daily Average UPH"}),(0,r.jsxs)(o.SZ,{children:["Average Units Per Hour achieved each day.",t?" (Calculated against: ".concat(t.name,")"):" (Select a target)"]})]}),eb.length>0&&(0,r.jsx)(et.h,{options:eb,value:el,onSelect:e=>eo(e),placeholder:"Select Target for UPH Chart",searchPlaceholder:"Search targets...",notFoundText:"No targets found.",triggerClassName:"h-9 text-sm w-full sm:w-[220px]",disabled:x})]})}),(0,r.jsx)(o.aY,{children:em.length>0&&t?(0,r.jsx)(p,{config:eh,className:"h-[300px] w-full",children:(0,r.jsxs)(w.v,{data:em,margin:{top:5,right:20,left:-10,bottom:5},children:[(0,r.jsx)(k.q,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))"}),(0,r.jsx)(S.K,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),(0,r.jsx)(D.B,{tickLine:!1,axisLine:!1,tickMargin:8,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},domain:[0,5*Math.ceil((a+5)/5)],allowDecimals:!0}),(0,r.jsx)(v,{cursor:!1,content:(0,r.jsx)(y,{hideLabel:!0})}),(0,r.jsx)(L.$,{dataKey:"uph",fill:ea.uph,radius:4,name:"Actual UPH"}),t&&t.targetUPH>0&&(0,r.jsx)(C.d,{y:t.targetUPH,stroke:ea.targetUPHLine,strokeDasharray:"3 3",strokeWidth:1.5,children:(0,r.jsx)(c._,{value:"Target: ".concat(t.targetUPH.toFixed(1)),position:"insideTopLeft",fill:ea.targetUPHLine,fontSize:10,dy:-5})}),(0,r.jsx)(j,{content:(0,r.jsx)(b,{})})]})}):(0,r.jsx)("div",{className:"h-[300px] flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:0===d.length?"No UPH targets defined.":el?"No data available for the selected range.":"Please select a target to display UPH chart."})})})]})};return x?(0,r.jsx)("div",{className:"p-6 text-center text-muted-foreground",children:"Loading analytics..."}):(0,r.jsxs)("div",{className:"w-full max-w-7xl mx-auto space-y-8 p-4 md:p-6 lg:p-8",children:[(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-6 md:mb-8 text-center",children:"Productivity Analytics"}),(0,r.jsxs)(o.Zb,{className:"shadow-sm",children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(G.Z,{className:"h-5 w-5"})," Filter Data Range"]}),(0,r.jsx)(o.SZ,{children:"Select the time period for the analytics. Hourly completion chart requires a single day selection."})]}),(0,r.jsxs)(o.aY,{className:"flex flex-col sm:flex-row items-center gap-3 pt-2",children:[(0,r.jsxs)(V.J2,{open:er,onOpenChange:es,children:[(0,r.jsx)(V.xo,{asChild:!0,children:(0,r.jsxs)(T.z,{id:"date",variant:"outline",className:(0,m.cn)("w-full sm:w-[300px] justify-start text-left font-normal h-9 text-sm",!g&&"text-muted-foreground"),children:[(0,r.jsx)($.Z,{className:"mr-2 h-4 w-4"}),(null==g?void 0:g.from)?g.to?(0,H.K)(g.from,g.to)?(0,Y.WU)(g.from,"LLL dd, y"):(0,r.jsxs)(r.Fragment,{children:[(0,Y.WU)(g.from,"LLL dd, y")," -"," ",(0,Y.WU)(g.to,"LLL dd, y")]}):(0,Y.WU)(g.from,"LLL dd, y"):(0,r.jsx)("span",{children:"Select Date Range"})]})}),(0,r.jsxs)(V.yk,{className:"w-auto p-0 flex flex-col sm:flex-row",align:"start",children:[(0,r.jsxs)("div",{className:"flex flex-col p-2 border-b sm:border-r sm:border-b-0",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-muted-foreground px-2 py-1",children:"Presets"}),ey.map(e=>(0,r.jsx)(T.z,{variant:"ghost",size:"sm",className:"justify-start text-sm font-normal h-8",onClick:()=>eg(e.range),children:e.label},e.label)),(0,r.jsx)(ee.Z,{className:"my-1"}),(0,r.jsx)(T.z,{variant:"ghost",size:"sm",className:"justify-start text-sm font-normal h-8 text-muted-foreground",onClick:()=>eg(void 0),children:"Clear"})]}),(0,r.jsx)(E.f,{initialFocus:!0,mode:"range",defaultMonth:null==g?void 0:g.from,selected:g,onSelect:eg,numberOfMonths:1,disabled:e=>e>new Date||e<new Date("2023-01-01")})]})]}),g&&(0,r.jsxs)(T.z,{variant:"link",size:"sm",onClick:()=>eg(void 0),className:"p-0 h-auto text-muted-foreground hover:text-foreground",children:[(0,r.jsx)(Q.Z,{className:"mr-1 h-3 w-3"})," Reset Range"]})]})]}),(0,r.jsxs)(o.Zb,{children:[(0,r.jsxs)(o.Ol,{children:[(0,r.jsxs)(o.ll,{className:"text-lg font-semibold flex items-center gap-2",children:[(0,r.jsx)(X.Z,{className:"h-5 w-5"})," Summary Statistics"]}),(0,r.jsxs)(o.SZ,{children:["Overview for the selected period (",(null==g?void 0:g.from)?(0,Y.WU)(g.from,"MMM d, y"):"Start"," - ",(null==g?void 0:g.to)?(0,Y.WU)(g.to,"MMM d, y"):"End",")."]})]}),(0,r.jsxs)(o.aY,{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Documents"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:ej.totalDocs})]}),(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Videos"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:ej.totalVideos})]}),(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Average Daily UPH"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:ej.avgUPH>0?ej.avgUPH:"-"})]}),(0,r.jsxs)("div",{className:"bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Days Logged"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:ej.daysLogged})]})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:ei?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eN,{}),(0,r.jsx)(ew,{}),(0,r.jsx)(ek,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ew,{}),(0,r.jsx)(ek,{}),(0,r.jsx)(eN,{})," "]})})]})}},69081:function(e,t,a){"use strict";a.d(t,{f:function(){return i}});var r=a(57437);a(2265);var s=a(70518),l=a(87592),o=a(52772),n=a(49354),d=a(89733);function i(e){let{className:t,classNames:a,showOutsideDays:i=!0,...c}=e;return(0,r.jsx)(o._W,{showOutsideDays:i,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,n.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-8 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-8 w-8 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,n.cn)((0,d.d)({variant:"ghost"}),"h-8 w-8 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,r.jsx)(s.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,r.jsx)(l.Z,{className:"h-4 w-4"})}},...c})}i.displayName="Calendar"},8120:function(e,t,a){"use strict";a.d(t,{h:function(){return v}});var r=a(57437),s=a(2265),l=a(1282),o=a(22468),n=a(49354),d=a(89733),i=a(16876),c=a(54817);a(54662);let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.mY,{ref:t,className:(0,n.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...s})});u.displayName=i.mY.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(i.mY.Input,{ref:t,className:(0,n.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...s})]})});m.displayName=i.mY.Input.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.mY.List,{ref:t,className:(0,n.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...s})});f.displayName=i.mY.List.displayName;let x=s.forwardRef((e,t)=>(0,r.jsx)(i.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));x.displayName=i.mY.Empty.displayName;let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.mY.Group,{ref:t,className:(0,n.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...s})});h.displayName=i.mY.Group.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.mY.Separator,{ref:t,className:(0,n.cn)("-mx-1 h-px bg-border",a),...s})}).displayName=i.mY.Separator.displayName;let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.mY.Item,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",a),...s})});p.displayName=i.mY.Item.displayName;var g=a(21413);function v(e){var t,a;let{options:i,value:c,onSelect:v,placeholder:y="Select an option...",searchPlaceholder:j="Search...",notFoundText:b="No options found.",triggerClassName:N,disabled:w=!1}=e,[k,S]=s.useState(!1);return(0,r.jsxs)(g.J2,{open:k,onOpenChange:S,children:[(0,r.jsx)(g.xo,{asChild:!0,children:(0,r.jsxs)(d.z,{variant:"outline",role:"combobox","aria-expanded":k,className:(0,n.cn)("w-full justify-between text-sm h-9 font-normal",N),disabled:w,children:[(0,r.jsx)("span",{className:"truncate",children:c&&null!==(a=null===(t=i.find(e=>e.value===c))||void 0===t?void 0:t.label)&&void 0!==a?a:y}),(0,r.jsx)(l.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsx)(g.yk,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{placeholder:j}),(0,r.jsxs)(f,{children:[(0,r.jsx)(x,{children:b}),(0,r.jsx)(h,{children:i.map(e=>(0,r.jsxs)(p,{value:e.label,onSelect:e=>{let t=i.find(t=>t.label.toLowerCase()===e.toLowerCase());t&&v(t.value),S(!1)},children:[(0,r.jsx)(o.Z,{className:(0,n.cn)("mr-2 h-4 w-4",c===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})]})})]})}},54662:function(e,t,a){"use strict";a.d(t,{$N:function(){return p},Be:function(){return g},GG:function(){return u},Vq:function(){return d},cN:function(){return h},cZ:function(){return f},fK:function(){return x},hg:function(){return i}});var r=a(57437),s=a(2265),l=a(13304),o=a(74697),n=a(49354);let d=l.fC,i=l.xz,c=l.h_,u=l.x8,m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.aV,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});m.displayName=l.aV.displayName;let f=s.forwardRef((e,t)=>{let{className:a,children:s,...d}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(l.VY,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[s,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(o.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.VY.displayName;let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.Dx,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});p.displayName=l.Dx.displayName;let g=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(l.dk,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});g.displayName=l.dk.displayName},21413:function(e,t,a){"use strict";a.d(t,{J2:function(){return n},xo:function(){return d},yk:function(){return i}});var r=a(57437),s=a(2265),l=a(61485),o=a(49354);let n=l.fC,d=l.xz,i=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:n=4,...d}=e;return(0,r.jsx)(l.h_,{children:(0,r.jsx)(l.VY,{ref:t,align:s,sideOffset:n,className:(0,o.cn)("z-50 w-auto rounded-md border bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})})});i.displayName=l.VY.displayName},29973:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(57437),s=a(2265),l=a(48484),o=a(49354);let n=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...d}=e;return(0,r.jsx)(l.f,{ref:t,decorative:n,orientation:s,className:(0,o.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...d})});n.displayName=l.f.displayName}},function(e){e.O(0,[472,631,767,17,772,596,954,909,733,544,971,23,744],function(){return e(e.s=17779)}),_N_E=e.O()}]);