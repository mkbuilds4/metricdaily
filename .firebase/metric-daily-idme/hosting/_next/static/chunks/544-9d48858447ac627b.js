"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{48185:function(e,t,i){i.d(t,{Ol:function(){return r},SZ:function(){return u},Zb:function(){return d},aY:function(){return l},eW:function(){return c},ll:function(){return s}});var o=i(57437),n=i(2265),a=i(49354);let d=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",i),...n})});d.displayName="Card";let r=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",i),...n})});r.displayName="CardHeader";let s=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("h4",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",i),...n})});s.displayName="CardTitle";let u=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",i),...n})});u.displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",i),...n})});l.displayName="CardContent";let c=n.forwardRef((e,t)=>{let{className:i,...n}=e;return(0,o.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",i),...n})});c.displayName="CardFooter"},61016:function(e,t,i){i.d(t,{l9:function(){return b},FU:function(){return x},q3:function(){return Q},oG:function(){return W},MR:function(){return J},_X:function(){return V},iF:function(){return z},Rd:function(){return H},RY:function(){return K},Io:function(){return B},FA:function(){return M},Ok:function(){return q},Gq:function(){return R},W1:function(){return L},UI:function(){return Z},cQ:function(){return Y},iX:function(){return j},by:function(){return X},zn:function(){return N},eU:function(){return G},el:function(){return F}});var o=i(49354),n=i(71475),a=i(80624),d=i(59520),r=i(51936),s=i(45158);let u=new Date,l=(0,n.k)(u,1),c=(0,n.k)(u,2),m=(0,n.k)(u,3),g=(0,n.k)(u,4),p=(0,n.k)(u,5),f=(0,n.k)(u,6),T=(0,n.k)(u,7),v=[{id:"meeting-1",name:"Meeting",targetUPH:9,docsPerUnit:10,videosPerUnit:1.5,isActive:!0,isDisplayed:!0},{id:"minimum-1",name:"Minimum",targetUPH:7.5,docsPerUnit:10,videosPerUnit:1.5,isActive:!1,isDisplayed:!0},{id:"outstanding-1",name:"Outstanding",targetUPH:10.5,docsPerUnit:10,videosPerUnit:1.5,isActive:!1,isDisplayed:!0}],S=[{id:"log-today",date:(0,o._3)(u),startTime:"14:00",endTime:"22:30",breakDurationMinutes:65,trainingDurationMinutes:5,hoursWorked:7.17,documentsCompleted:62,videoSessionsCompleted:85,targetId:v[0].id,notes:"Started a bit late, focused on docs.",isFinalized:!1},{id:"log-yesterday",date:(0,o._3)(l),startTime:"13:45",endTime:"22:15",breakDurationMinutes:60,trainingDurationMinutes:0,hoursWorked:7.5,documentsCompleted:78,videoSessionsCompleted:105,targetId:v[0].id,notes:"Good pace yesterday.",isFinalized:!0},{id:"log-2daysago",date:(0,o._3)(c),startTime:"14:10",endTime:"22:40",breakDurationMinutes:70,trainingDurationMinutes:10,hoursWorked:7,documentsCompleted:55,videoSessionsCompleted:72,targetId:v[0].id,notes:"More video calls this day.",isFinalized:!0},{id:"log-3daysago",date:(0,o._3)(m),startTime:"14:00",endTime:"22:00",breakDurationMinutes:60,trainingDurationMinutes:0,hoursWorked:7,documentsCompleted:65,videoSessionsCompleted:90,targetId:v[0].id,notes:"Standard day.",isFinalized:!0},{id:"log-4daysago",date:(0,o._3)(g),startTime:"14:00",endTime:"22:30",breakDurationMinutes:65,trainingDurationMinutes:0,hoursWorked:7.25,documentsCompleted:70,videoSessionsCompleted:95,targetId:v[0].id,notes:"Average day.",isFinalized:!0},{id:"log-5daysago",date:(0,o._3)(p),startTime:"13:30",endTime:"22:30",breakDurationMinutes:60,trainingDurationMinutes:15,hoursWorked:7.75,documentsCompleted:85,videoSessionsCompleted:110,targetId:v[0].id,notes:"Worked a full 8 hours.",isFinalized:!0},{id:"log-6daysago",date:(0,o._3)(f),startTime:"14:15",endTime:"22:00",breakDurationMinutes:45,trainingDurationMinutes:0,hoursWorked:7,documentsCompleted:68,videoSessionsCompleted:88,targetId:v[0].id,notes:"Shorter break.",isFinalized:!0},{id:"log-7daysago",date:(0,o._3)(T),startTime:"14:00",endTime:"22:30",breakDurationMinutes:65,trainingDurationMinutes:0,hoursWorked:7.25,documentsCompleted:72,videoSessionsCompleted:100,targetId:v[0].id,notes:"End of the previous week.",isFinalized:!0}],D="log-today",C=(0,a.D)((0,o._3)(u)),_=S.find(e=>e.id===D),U=[{id:"audit-1",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,14),55),10).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated document count to 8 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:0,videoSessionsCompleted:0},newState:{..._,documentsCompleted:8,videoSessionsCompleted:0}},{id:"audit-2",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,15),30),25).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated video count to 12 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:8,videoSessionsCompleted:0},newState:{..._,documentsCompleted:8,videoSessionsCompleted:12}},{id:"audit-3",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,16),15),5).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated document count to 15 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:8,videoSessionsCompleted:12},newState:{..._,documentsCompleted:15,videoSessionsCompleted:12}},{id:"audit-4",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,17),40),0).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated video count to 30 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:15,videoSessionsCompleted:12},newState:{..._,documentsCompleted:15,videoSessionsCompleted:30}},{id:"audit-5",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,18),5),15).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated document count to 25 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:15,videoSessionsCompleted:30},newState:{..._,documentsCompleted:25,videoSessionsCompleted:30}},{id:"audit-6",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,19),20),40).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated video count to 55 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:25,videoSessionsCompleted:30},newState:{..._,documentsCompleted:25,videoSessionsCompleted:55}},{id:"audit-7",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,20),10),55).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated document count to 40 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:25,videoSessionsCompleted:55},newState:{..._,documentsCompleted:40,videoSessionsCompleted:55}},{id:"audit-8",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,21),35),5).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated video count to 70 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:40,videoSessionsCompleted:55},newState:{..._,documentsCompleted:40,videoSessionsCompleted:70}},{id:"audit-9",timestamp:(0,d.O)((0,r.H)((0,s.B)(C,22),25),0).toISOString(),action:"UPDATE_WORK_LOG_QUICK_COUNT",entityType:"WorkLog",entityId:D,details:"Quick updated document count to 62 and video count to 85 for log ".concat((0,o._3)(u),"."),previousState:{..._,documentsCompleted:40,videoSessionsCompleted:70},newState:{..._,documentsCompleted:62,videoSessionsCompleted:85}}].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());var h=i(4716);let y="workLogs",k="uphTargets",w="auditLogs",E="userSettings",I="sampleDataLoaded";function P(){return"".concat(Date.now().toString(36),"-").concat(Math.random().toString(36).substring(2,9))}function A(e,t){try{let i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error("Error reading localStorage key “".concat(e,"”:"),i),t}}function O(e,t){try{let i=JSON.stringify(t);window.localStorage.setItem(e,i)}catch(t){console.error("Error writing to localStorage key “".concat(e,"”:"),t)}}function M(){let e=A(w,[]);return e.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),e}function b(e,t,i,o,n,a){let d=M(),r={id:P(),timestamp:new Date().toISOString(),action:e,entityType:t,entityId:o,details:i,previousState:null!=n?n:void 0,newState:null!=a?a:void 0};d.unshift(r),O(w,d.slice(0,2500)),console.log("[Audit Log] Added:",r)}function L(){let e=A(y,[]);return e.sort((e,t)=>t.date.localeCompare(e.date)),e}function N(e,t){var i,n,d,r,s,u,l,c,m;let g,p,f;let T=(null!==(i=e.breakDurationMinutes)&&void 0!==i?i:0)+(null!==(n=e.trainingDurationMinutes)&&void 0!==n?n:0),v=(0,a.D)(e.date+"T00:00:00");if((0,h.J)(v))g=(0,o.fH)(v,e.startTime,e.endTime,T);else throw Error("Invalid date provided for work log.");if(g<0)throw Error("Calculated hours worked cannot be negative.");let S=null!==e.documentsCompleted&&void 0!==e.documentsCompleted&&!isNaN(e.documentsCompleted)&&e.documentsCompleted>=0?e.documentsCompleted:0,D=null!==e.videoSessionsCompleted&&void 0!==e.videoSessionsCompleted&&!isNaN(e.videoSessionsCompleted)&&e.videoSessionsCompleted>=0?e.videoSessionsCompleted:0;if(!e.date||!/^\d{4}-\d{2}-\d{2}$/.test(e.date))throw Error("Date must be in YYYY-MM-DD format.");e.targetId&&!R().some(t=>t.id===e.targetId)&&console.warn('[Client Action] Target ID "'.concat(e.targetId,'" provided for log does not exist. Saving log without association.'));let C=L(),_=null,U=!1,k={date:e.date,startTime:e.startTime,endTime:e.endTime,breakDurationMinutes:null!==(d=e.breakDurationMinutes)&&void 0!==d?d:0,trainingDurationMinutes:null!==(r=e.trainingDurationMinutes)&&void 0!==r?r:0,hoursWorked:g,documentsCompleted:S,videoSessionsCompleted:D,targetId:e.targetId,notes:e.notes,goalMetTimes:null!==(s=e.goalMetTimes)&&void 0!==s?s:{}};if(e.id){let t=C.findIndex(t=>t.id===e.id);if(t>-1){let i=C[t];_={...i},p={...i,...k,isFinalized:void 0!==e.isFinalized?e.isFinalized:i.isFinalized},C[t]=p}else U=!0,p={...k,id:P(),isFinalized:null!==(u=e.isFinalized)&&void 0!==u&&u},C.push(p)}else{let t=C.findIndex(t=>t.date===e.date&&!t.isFinalized);if(t>-1){let i=C[t];_={...i},p={...i,...k,isFinalized:void 0!==e.isFinalized?e.isFinalized:i.isFinalized},C[t]=p}else U=!0,p={...k,id:P(),isFinalized:null!==(l=e.isFinalized)&&void 0!==l&&l},C.push(p)}C.sort((e,t)=>t.date.localeCompare(e.date)),O(y,C),O(I,!1);let w="",E="Docs: ".concat(p.documentsCompleted,", Videos: ").concat(p.videoSessionsCompleted,", Hours: ").concat(p.hoursWorked.toFixed(2),".");if(t)switch(f=t){case"UPDATE_WORK_LOG_QUICK_COUNT":let A=null!==(c=null==_?void 0:_.documentsCompleted)&&void 0!==c?c:0;null==_||_.videoSessionsCompleted;let M=A!==p.documentsCompleted?"document":"video",N="document"===M?p.documentsCompleted:p.videoSessionsCompleted;w="Quick updated ".concat(M," count to ").concat(N," for log ").concat(p.date,".");break;case"UPDATE_WORK_LOG_BREAK":w="Added break time to log for ".concat(p.date,". Total break: ").concat((0,o.BQ)(60*(p.breakDurationMinutes||0)),".");break;case"UPDATE_WORK_LOG_TRAINING":w="Added training time to log for ".concat(p.date,". Total training: ").concat((0,o.BQ)(60*(p.trainingDurationMinutes||0)),".");break;case"UPDATE_WORK_LOG_GOAL_MET":let H=Object.keys(p.goalMetTimes||{}).find(e=>!((null==_?void 0:_.goalMetTimes)||{})[e]),W=(null===(m=R().find(e=>e.id===H))||void 0===m?void 0:m.name)||"Unknown Target";w='Target "'.concat(W,'" goal met time recorded for log ').concat(p.date,".");break;case"SYSTEM_ARCHIVE_TODAY_LOG":w="Finalized log for ".concat(p.date,". ").concat(E);break;default:w="Performed action ".concat(f," for log ").concat(p.date,". ").concat(E)}else if("CREATE_WORK_LOG"==(f=U?"CREATE_WORK_LOG":"UPDATE_WORK_LOG"))w="Created work log for ".concat(p.date,". ").concat(E);else if(w="Updated work log for ".concat(p.date,". "),_){let e=[];_.startTime!==p.startTime&&e.push("Start: ".concat(_.startTime," -> ").concat(p.startTime)),_.endTime!==p.endTime&&e.push("End: ".concat(_.endTime," -> ").concat(p.endTime)),_.documentsCompleted!==p.documentsCompleted&&e.push("Docs: ".concat(_.documentsCompleted," -> ").concat(p.documentsCompleted)),_.videoSessionsCompleted!==p.videoSessionsCompleted&&e.push("Videos: ".concat(_.videoSessionsCompleted," -> ").concat(p.videoSessionsCompleted)),_.breakDurationMinutes!==p.breakDurationMinutes&&e.push("Break: ".concat(_.breakDurationMinutes,"m -> ").concat(p.breakDurationMinutes,"m")),(_.trainingDurationMinutes||0)!==(p.trainingDurationMinutes||0)&&e.push("Training: ".concat(_.trainingDurationMinutes||0,"m -> ").concat(p.trainingDurationMinutes||0,"m")),_.notes!==p.notes&&e.push("Notes updated."),_.targetId!==p.targetId&&e.push("Target ID updated."),_.isFinalized!==p.isFinalized&&e.push("Finalized status changed to ".concat(p.isFinalized,".")),w+=e.join(", ")||"No specific field changes detected."}else w+=E;return w&&f&&b(f,"WorkLog",w,p.id,_,p),p}function H(e){let t=L(),i=t.find(t=>t.id===e);if(i)O(y,t=t.filter(t=>t.id!==e)),O(I,!1),b("DELETE_WORK_LOG","WorkLog","Deleted work log for ".concat(i.date," (ID: ").concat(e,"). Docs: ").concat(i.documentsCompleted,", Videos: ").concat(i.videoSessionsCompleted,". Finalized: ").concat(!!i.isFinalized),e,i,null);else throw console.warn("[Client Action] Log ID not found for deletion:",e),Error("Work log with ID ".concat(e," not found for deletion."))}function R(){return A(k,[])}function W(e){var t;if(!e.name||""===e.name.trim())throw Error("Target name cannot be empty.");if(void 0===e.targetUPH||isNaN(e.targetUPH)||e.targetUPH<=0)throw Error("Target UPH must be a positive number.");if(void 0===e.docsPerUnit||isNaN(e.docsPerUnit)||e.docsPerUnit<=0)throw Error("Documents per unit must be a positive number.");if(void 0===e.videosPerUnit||isNaN(e.videosPerUnit)||e.videosPerUnit<=0)throw Error("Video sessions per unit must be a positive number.");let i=R(),o={...e,id:P(),isActive:0===i.length,isDisplayed:null===(t=e.isDisplayed)||void 0===t||t};return i.push(o),O(k,i),O(I,!1),b("CREATE_UPH_TARGET","UPHTarget",'Created UPH target "'.concat(o.name,'". UPH: ').concat(o.targetUPH,", Docs/Unit: ").concat(o.docsPerUnit,", Videos/Unit: ").concat(o.videosPerUnit,", Displayed: ").concat(o.isDisplayed,"."),o.id,null,o),o}function F(e){if(!e.id)throw Error("Target ID is required for update.");if(!e.name||""===e.name.trim())throw Error("Target name cannot be empty.");if(void 0===e.targetUPH||isNaN(e.targetUPH)||e.targetUPH<=0)throw Error("Target UPH must be a positive number.");if(void 0===e.docsPerUnit||isNaN(e.docsPerUnit)||e.docsPerUnit<=0)throw Error("Documents per unit must be a positive number.");if(void 0===e.videosPerUnit||isNaN(e.videosPerUnit)||e.videosPerUnit<=0)throw Error("Video sessions per unit must be a positive number.");let t=R(),i=t.findIndex(t=>t.id===e.id),o=null;if(i>-1){var n,a,d,r,s;o={...t[i]},t[i]={...e,isDisplayed:null===(a=null!==(n=e.isDisplayed)&&void 0!==n?n:o.isDisplayed)||void 0===a||a},O(k,t),O(I,!1);let u=[];o.name!==e.name&&u.push('Name: "'.concat(o.name,'" -> "').concat(e.name,'"')),o.targetUPH!==e.targetUPH&&u.push("Target UPH: ".concat(o.targetUPH," -> ").concat(e.targetUPH)),o.docsPerUnit!==e.docsPerUnit&&u.push("Docs/Unit: ".concat(o.docsPerUnit," -> ").concat(e.docsPerUnit)),o.videosPerUnit!==e.videosPerUnit&&u.push("Videos/Unit: ".concat(o.videosPerUnit," -> ").concat(e.videosPerUnit)),o.isActive!==e.isActive&&u.push("Activation status changed to ".concat(e.isActive,".")),(null===(d=o.isDisplayed)||void 0===d||d)!==(null===(r=e.isDisplayed)||void 0===r||r)&&u.push("Display status changed to ".concat(null===(s=e.isDisplayed)||void 0===s||s,".")),b("UPDATE_UPH_TARGET","UPHTarget",'Updated UPH target "'.concat(e.name,'". Changes: ').concat(u.join(", ")||"No field changes."),e.id,o,t[i])}else throw Error("Target with ID ".concat(e.id," not found for update."));return t[i]}function z(e){let t=R(),i=t.find(t=>t.id===e);if(!i)throw Error("Target with ID ".concat(e," not found for deletion."));if(i.isActive)throw Error("Cannot delete the currently active target. Set another target as active first.");O(k,t=t.filter(t=>t.id!==e)),O(I,!1),b("DELETE_UPH_TARGET","UPHTarget",'Deleted UPH target "'.concat(i.name,'" (ID: ').concat(e,"). UPH: ").concat(i.targetUPH,"."),e,i,null)}function G(e){let t=R(),i=t.find(e=>e.isActive),o=t.map(t=>({...t,isActive:t.id===e})),n=o.find(t=>t.id===e);if(!n)throw Error("Target with ID ".concat(e," not found."));return O(k,o),O(I,!1),b("SET_ACTIVE_UPH_TARGET","UPHTarget",'Set UPH target "'.concat(n.name,'" as active.').concat(i?' Previously active: "'.concat(i.name,'".'):""),n.id,i||null,n),n}function B(){let e=R();return e.find(e=>e.isActive)||(e.length>0?(console.warn("[Action] No active target found. Returning first target as fallback for display."),e.find(e=>{var t;return null===(t=e.isDisplayed)||void 0===t||t})||e[0]):null)}function K(e){let t=R(),i=t.find(t=>t.id===e);if(!i)throw Error("Target with ID ".concat(e," not found for duplication."));let o="".concat(i.name," - Copy"),n=1;for(;t.some(e=>e.name===o);)n++,o="".concat(i.name," - Copy ").concat(n);let a={...i,id:P(),name:o,isActive:!1,isDisplayed:!0};return t.push(a),O(k,t),O(I,!1),b("DUPLICATE_UPH_TARGET","UPHTarget",'Duplicated UPH target "'.concat(i.name,'" to "').concat(a.name,'". Displayed: ').concat(a.isDisplayed,"."),a.id,i,a),a}function x(e,t){let i=L(),o=i.findIndex(t=>t.id===e);if(-1===o)throw Error("Log with ID ".concat(e," not found."));let n={...i[o]};return n.breakDurationMinutes=(n.breakDurationMinutes||0)+t,N(n,"UPDATE_WORK_LOG_BREAK")}function Q(e,t){let i=L(),o=i.findIndex(t=>t.id===e);if(-1===o)throw Error("Log with ID ".concat(e," not found."));let n={...i[o]};return n.trainingDurationMinutes=(n.trainingDurationMinutes||0)+t,N(n,"UPDATE_WORK_LOG_TRAINING")}function Y(){return A(I,!1)}function j(){let e=window.localStorage.getItem(y),t=window.localStorage.getItem(k);if(null!==e&&"[]"!==e||null!==t&&"[]"!==t)return console.log("[Action] Existing work logs or UPH targets found in localStorage. Skipping sample data load."),O(I,!1),!1;{console.log("[Action] Loading sample data...");let e=v.map((e,t)=>({...e,id:e.id||P(),isActive:0===t,isDisplayed:void 0===e.isDisplayed||e.isDisplayed})),t=(0,o._3)(new Date),i=S.map(i=>{var o,n,a;return{...i,id:i.id||P(),targetId:(null===(o=e[0])||void 0===o?void 0:o.id)||void 0,breakDurationMinutes:null!==(n=i.breakDurationMinutes)&&void 0!==n?n:0,trainingDurationMinutes:null!==(a=i.trainingDurationMinutes)&&void 0!==a?a:0,goalMetTimes:{},isFinalized:i.date!==t}});O(w,U),console.log("[Action] Cleared existing audit logs and saved ".concat(U.length," sample audit logs.")),O(y,i),O(k,e),O(I,!0);let n=A(E,null);return n&&0!==Object.keys(n).length||X({defaultStartTime:"14:00",defaultEndTime:"22:30",defaultBreakMinutes:0,defaultTrainingMinutes:0,autoSwitchTargetBySchedule:!1}),b("SYSTEM_LOAD_SAMPLE_DATA","System","Loaded sample work logs, UPH targets, and audit logs."),!0}}function V(){O(y,[]),O(k,[]),O(E,{}),O(w,[]),O(I,!1),b("SYSTEM_CLEAR_ALL_DATA","System","Cleared all work logs, UPH targets, settings, and audit logs.")}function J(){let e=(0,o._3)(new Date),t=L(),i=t.findIndex(t=>t.date===e&&!t.isFinalized);if(!(i>-1))return console.warn("[Action] Attempted to finalize today's log, but no active log found for ".concat(e,".")),b("SYSTEM_ARCHIVE_TODAY_LOG","System","Attempt to finalize log for ".concat(e,": No active log found.")),null;{let e=N({...t[i],isFinalized:!0},"SYSTEM_ARCHIVE_TODAY_LOG");return console.log("[Action] Finalized log for ".concat(e.date)),e}}function q(){return A(E,{defaultStartTime:"14:00",defaultEndTime:"22:30",defaultBreakMinutes:0,defaultTrainingMinutes:0,autoSwitchTargetBySchedule:!1})}function X(e){var t,i,o,n,a;let d=/^([01]\d|2[0-3]):([0-5]\d)$/;if(!d.test(e.defaultStartTime)||!d.test(e.defaultEndTime))throw Error("Invalid time format. Use HH:mm.");let r=e.defaultBreakMinutes,s=e.defaultTrainingMinutes;(r<0||!Number.isInteger(r))&&(console.warn("Invalid default break minutes (".concat(r,"), defaulting to 0.")),r=0),(null==s||s<0||!Number.isInteger(s))&&(console.warn("Invalid default training minutes (".concat(s,"), defaulting to 0.")),s=0);let u={...e,defaultBreakMinutes:r,defaultTrainingMinutes:s,autoSwitchTargetBySchedule:null!==(t=e.autoSwitchTargetBySchedule)&&void 0!==t&&t},l=q();O(E,u),O(I,!1);let c=[];return l.defaultStartTime!==u.defaultStartTime&&c.push("Start Time: ".concat(l.defaultStartTime," -> ").concat(u.defaultStartTime)),l.defaultEndTime!==u.defaultEndTime&&c.push("End Time: ".concat(l.defaultEndTime," -> ").concat(u.defaultEndTime)),l.defaultBreakMinutes!==u.defaultBreakMinutes&&c.push("Break: ".concat(l.defaultBreakMinutes,"m -> ").concat(u.defaultBreakMinutes,"m")),l.defaultTrainingMinutes!==u.defaultTrainingMinutes&&c.push("Training: ".concat(l.defaultTrainingMinutes,"m -> ").concat(u.defaultTrainingMinutes,"m")),(null!==(i=l.autoSwitchTargetBySchedule)&&void 0!==i&&i)!==(null!==(o=u.autoSwitchTargetBySchedule)&&void 0!==o&&o)&&c.push("Auto Switch Target: ".concat(null!==(n=l.autoSwitchTargetBySchedule)&&void 0!==n&&n," -> ").concat(null!==(a=u.autoSwitchTargetBySchedule)&&void 0!==a&&a)),b("UPDATE_SETTINGS","Settings","Updated default settings. ".concat(c.join(", ")||"No changes."),void 0,l,u),u}function Z(e){try{let t=JSON.parse(e);if(!t||"object"!=typeof t||!Array.isArray(t.workLogs)||!Array.isArray(t.uphTargets)||!Array.isArray(t.auditLogs)||"object"!=typeof t.userSettings||null===t.userSettings||"boolean"!=typeof t.sampleDataLoaded)throw Error("Invalid JSON structure. Required keys: workLogs, uphTargets, auditLogs, userSettings, sampleDataLoaded.");O(y,t.workLogs),O(k,t.uphTargets);let i=t.auditLogs.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());return O(w,i.slice(0,2500)),O(E,t.userSettings),O(I,t.sampleDataLoaded),b("SYSTEM_IMPORT_DATA","System","Imported all application data from a JSON file."),{success:!0}}catch(t){console.error("Error importing application data:",t);let e=t instanceof Error?t.message:"An unknown error occurred during data import.";return b("SYSTEM_IMPORT_DATA","System","Failed to import application data. Error: ".concat(e)),{success:!1,error:e}}}}}]);